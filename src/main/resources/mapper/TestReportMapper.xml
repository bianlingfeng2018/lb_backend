<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.libiao.customer.dal.mapper.TestReportMapper">
  <resultMap id="BaseResultMap" type="com.libiao.customer.dal.model.TestReport">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="report_num" jdbcType="VARCHAR" property="reportNum" />
    <result column="sample_name" jdbcType="VARCHAR" property="sampleName" />
    <result column="client" jdbcType="VARCHAR" property="client" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="sample_model" jdbcType="VARCHAR" property="sampleModel" />
    <result column="brand" jdbcType="VARCHAR" property="brand" />
    <result column="supplier" jdbcType="VARCHAR" property="supplier" />
    <result column="order_num" jdbcType="VARCHAR" property="orderNum" />
    <result column="buyer" jdbcType="VARCHAR" property="buyer" />
    <result column="producers" jdbcType="VARCHAR" property="producers" />
    <result column="export_place" jdbcType="VARCHAR" property="exportPlace" />
    <result column="producing_country" jdbcType="VARCHAR" property="producingCountry" />
    <result column="test_trade_id" jdbcType="VARCHAR" property="testTradeId" />
    <result column="receiving_date" jdbcType="TIMESTAMP" property="receivingDate" />
    <result column="test_start_date" jdbcType="DATE" property="testStartDate" />
    <result column="test_end_date" jdbcType="DATE" property="testEndDate" />
    <result column="approver" jdbcType="VARCHAR" property="approver" />
    <result column="reviewer" jdbcType="VARCHAR" property="reviewer" />
    <result column="editor" jdbcType="VARCHAR" property="editor" />
    <result column="sample_desc" jdbcType="LONGVARCHAR" property="sampleDesc" />
    <result column="test_experiment" jdbcType="LONGVARCHAR" property="testExperiment" />
    <result column="test_remark" jdbcType="LONGVARCHAR" property="testRemark" />
    <result column="remark" jdbcType="LONGVARCHAR" property="remark" />
    <result column="test_period" jdbcType="VARCHAR" property="testPeriod" />
    <result column="flex_obj" jdbcType="LONGVARCHAR" property="flexObj" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from test_report
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.libiao.customer.dal.model.TestReport">
    insert into test_report (id, report_num, sample_name,
      client, address, sample_model,
      brand, supplier, order_num,
      buyer, producers, export_place,
      producing_country, test_trade_id, receiving_date,
      test_start_date, test_end_date, approver,
      reviewer, editor, sample_desc,
      test_experiment, test_remark, remark, test_period, flex_obj)
    values (#{id,jdbcType=BIGINT}, #{reportNum,jdbcType=VARCHAR}, #{sampleName,jdbcType=VARCHAR},
      #{client,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, #{sampleModel,jdbcType=VARCHAR},
      #{brand,jdbcType=VARCHAR}, #{supplier,jdbcType=VARCHAR}, #{orderNum,jdbcType=VARCHAR},
      #{buyer,jdbcType=VARCHAR}, #{producers,jdbcType=VARCHAR}, #{exportPlace,jdbcType=VARCHAR},
      #{producingCountry,jdbcType=VARCHAR}, #{testTradeId,jdbcType=VARCHAR}, #{receivingDate,jdbcType=TIMESTAMP},
      #{testStartDate,jdbcType=DATE}, #{testEndDate,jdbcType=DATE}, #{approver,jdbcType=VARCHAR},
      #{reviewer,jdbcType=VARCHAR}, #{editor,jdbcType=VARCHAR}, #{sampleDesc,jdbcType=LONGVARCHAR},
      #{testExperiment,jdbcType=LONGVARCHAR}, #{testRemark,jdbcType=LONGVARCHAR}, #{remark,jdbcType=LONGVARCHAR},
            #{testPeriod,jdbcType=VARCHAR}, #{flexObj,jdbcType=LONGVARCHAR})
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      select LAST_INSERT_ID()
    </selectKey>
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.libiao.customer.dal.model.TestReport">
    update test_report
    set report_num = #{reportNum,jdbcType=VARCHAR},
      sample_name = #{sampleName,jdbcType=VARCHAR},
      client = #{client,jdbcType=VARCHAR},
      address = #{address,jdbcType=VARCHAR},
      sample_model = #{sampleModel,jdbcType=VARCHAR},
      brand = #{brand,jdbcType=VARCHAR},
      supplier = #{supplier,jdbcType=VARCHAR},
      order_num = #{orderNum,jdbcType=VARCHAR},
      buyer = #{buyer,jdbcType=VARCHAR},
      producers = #{producers,jdbcType=VARCHAR},
      export_place = #{exportPlace,jdbcType=VARCHAR},
      producing_country = #{producingCountry,jdbcType=VARCHAR},
      test_trade_id = #{testTradeId,jdbcType=VARCHAR},
      receiving_date = #{receivingDate,jdbcType=TIMESTAMP},
      test_start_date = #{testStartDate,jdbcType=DATE},
      test_end_date = #{testEndDate,jdbcType=DATE},
      approver = #{approver,jdbcType=VARCHAR},
      reviewer = #{reviewer,jdbcType=VARCHAR},
      editor = #{editor,jdbcType=VARCHAR},
      sample_desc = #{sampleDesc,jdbcType=LONGVARCHAR},
      test_experiment = #{testExperiment,jdbcType=LONGVARCHAR},
      test_remark = #{testRemark,jdbcType=LONGVARCHAR},
      remark = #{remark,jdbcType=LONGVARCHAR},
      test_period = #{testPeriod,jdbcType=VARCHAR},
      flex_obj = #{flexObj,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select id, report_num, sample_name, client, address, sample_model, brand, supplier,
    order_num, buyer, producers, export_place, producing_country, test_trade_id, receiving_date,
    test_start_date, test_end_date, approver, reviewer, editor, sample_desc, test_experiment,
    test_remark, remark, test_period, flex_obj
    from test_report
    where id = #{id,jdbcType=BIGINT}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    select id, report_num, sample_name, client, address, sample_model, brand, supplier,
    order_num, buyer, producers, export_place, producing_country, test_trade_id, receiving_date,
    test_start_date, test_end_date, approver, reviewer, editor, sample_desc, test_experiment,
    test_remark, remark, test_period, flex_obj
    from test_report
  </select>
  <select id="queryTestReportByTestTradeId" resultMap="BaseResultMap">
    select id, report_num, sample_name, client, address, sample_model, brand, supplier,
           order_num, buyer, producers, export_place, producing_country, test_trade_id, receiving_date,
           test_start_date, test_end_date, approver, reviewer, editor, sample_desc, test_experiment,
           test_remark, remark, test_period, flex_obj
    from test_report
    where test_trade_id = #{testTradeId,jdbcType=BIGINT}
  </select>
  <select id="selectAllByOwner" resultMap="BaseResultMap">
    select a.*
    from test_report a
           left join user_test_trade b
                     on a.test_trade_id = b.test_trade_id
           left join user c
                     on b.user_id = c.id
    where c.username = #{owner,jdbcType=VARCHAR}
  </select>
  <select id="selectTestReportByReportNum" resultMap="BaseResultMap">
    select a.*
    from test_report a
    where a.report_num = #{reportNum,jdbcType=VARCHAR}
  </select>
</mapper>
